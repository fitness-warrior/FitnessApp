CREATE TYPE type AS ENUM ('a','b','c');

CREATE TABLE IF NOT EXISTS game_char (
    game_char_id SERIAL PRIMARY KEY,
    game_char_level INT NOT NULL,
    game_char_colour VARCHAR(20) NOT NULL,
    game_char_type type NOT NULL,
    game_char_hp INT NOT NULL,
    game_char_attack INT NOT NULL,
    game_char_speed INT NOT NULL
);

CREATE TABLE IF NOT EXISTS users (
    user_id SERIAL PRIMARY KEY,
    game_char_id INT NOT NULL REFERENCES game_char(game_char_id),
    user_name VARCHAR(40) NOT NULL,
    user_surname VARCHAR(40) NOT NULL,
    user_email VARCHAR(40) UNIQUE NOT NULL
);

CREATE TABLE IF NOT EXISTS equipment (
    equip_id SERIAL PRIMARY KEY,
    equipment VARCHAR(20) NOT NULL
);

CREATE TABLE IF NOT EXISTS user_equip (
    user_id INT NOT NULL REFERENCES users(user_id),
    equip_id INT NOT NULL REFERENCES equipment(equip_id),
    PRIMARY KEY (user_id, equip_id)
);

CREATE TYPE gender AS ENUM ('male','female');

CREATE TYPE goal AS ENUM (
'Fat Loss',
'Muscle Gain',
'Endurance Improvement',
'General Fitness',
'Athletic Performance',
'Injury Rehabilitation'
);

CREATE TABLE IF NOT EXISTS body_metrics (
    body_id SERIAL PRIMARY KEY,
    user_id INT NOT NULL REFERENCES users(user_id),
    body_weight FLOAT NOT NULL,
    body_past_weight FLOAT,
    body_height FLOAT NOT NULL,
    body_age INT NOT NULL,
    body_gender gender NOT NULL,
    body_goal goal NOT NULL
);

CREATE TYPE focuse AS ENUM ('strength','cardio');

CREATE TYPE equip AS ENUM (
'Bodyweight Only',
'Dumbbells',
'Barbells',
'Resistance Bands',
'Gym Machines',
'Cardio Machines'
);

CREATE TABLE IF NOT EXISTS exersise (
    exer_id SERIAL PRIMARY KEY,
    exer_name VARCHAR(50) NOT NULL,
    exer_body_area VARCHAR(20) NOT NULL,
    exer_type focuse NOT NULL,
    exer_descrip TEXT,
    exer_vid TEXT,
    exer_equip equip NOT NULL
);

CREATE TABLE IF NOT EXISTS work_plan (
    work_id SERIAL PRIMARY KEY,
    body_id INT NOT NULL REFERENCES body_metrics(body_id),
    work_name VARCHAR(50) NOT NULL,
    work_descrip TEXT,
    work_created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    work_updated_at TIMESTAMP,
    work_day DATE
);

CREATE TABLE IF NOT EXISTS plan_exersise (
    plan_exer_id SERIAL PRIMARY KEY,
    work_id INT NOT NULL REFERENCES work_plan(work_id),
    exer_id INT NOT NULL REFERENCES exersise(exer_id),
    plan_exer_amount INT NOT NULL,
    plan_exer_set INT NOT NULL,
    plan_exer_PB INT,
    plan_exer_PB_first INT
);

CREATE TABLE IF NOT EXISTS meal_plan (
    meal_id SERIAL PRIMARY KEY,
    body_id INT NOT NULL REFERENCES body_metrics(body_id),
    meal_day TIMESTAMP,
    meal_name VARCHAR(20) NOT NULL
);

CREATE TABLE IF NOT EXISTS food (
    food_id SERIAL PRIMARY KEY,
    food_name VARCHAR(50),
    food_type VARCHAR(50),
    food_calories FLOAT
);

CREATE TABLE IF NOT EXISTS food_plan (
    food_plan_id SERIAL PRIMARY KEY,
    food_id INT NOT NULL REFERENCES food(food_id),
    meal_id INT NOT NULL REFERENCES meal_plan(meal_id)
);

CREATE TABLE IF NOT EXISTS custom_items (
    item_id SERIAL PRIMARY KEY,
    item_name VARCHAR(20),
    item_effect INT,
    item_level INT,
    item_type VARCHAR(20)
);

CREATE TABLE IF NOT EXISTS game_items (
    item_id INT NOT NULL REFERENCES custom_items(item_id),
    game_char_id INT NOT NULL REFERENCES game_char(game_char_id),
    PRIMARY KEY (item_id, game_char_id)
);

CREATE TABLE IF NOT EXISTS enemy (
    enemy_id SERIAL PRIMARY KEY,
    game_char_id INT NOT NULL REFERENCES game_char(game_char_id),
    enemy_name VARCHAR(20) NOT NULL,
    enemy_health FLOAT NOT NULL,
    enemy_attack FLOAT NOT NULL,
    enemy_level INT NOT NULL
);

CREATE TYPE reward_type AS ENUM ('item','currency','experience');

CREATE TABLE IF NOT EXISTS rewards (
    reward_id SERIAL PRIMARY KEY,
    enemy_id INT NOT NULL REFERENCES enemy(enemy_id),
    reward_level INT NOT NULL,
    reward_name VARCHAR(20) NOT NULL,
    reward_type reward_type NOT NULL,
    description TEXT
<<<<<<< HEAD
=======
    );
--Added two new tables for meal collection page
CREATE TABLE IF NOT EXISTS meal_collection (
    collection_id SERIAL PRIMARY KEY,
    collection_name VARCHAR(50) NOT NULL,
    collection_type VARCHAR(20) NOT NULL,
    description TEXT,
    created_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE IF NOT EXISTS collection_foods (
    collection_id INT NOT NULL REFERENCES meal_collection(collection_id),
    food_id INT NOT NULL REFERENCES food(food_id),
    PRIMARY KEY (collection_id, food_id)
>>>>>>> 1fba9cae2b4d4b42b0e28e2efb02c84eeb745d61
);



INSERT INTO game_char (game_char_level, game_char_colour, game_char_type, game_char_hp, game_char_attack, game_char_speed) VALUES
(1, 'red', 'a', 200, 10, 5),
(1, 'blue', 'b', 100, 25, 10),
(1, 'green', 'c', 80, 15, 20);

INSERT INTO users (game_char_id, user_name, user_surname, user_email) VALUES
(1, 'John', 'Smith', 'john.smith@email.com'),
(2, 'Sarah', 'Johnson', 'sarah.j@email.com'),
(3, 'Mike', 'Williams', 'mike.w@email.com'),
(1, 'Emma', 'Brown', 'emma.brown@email.com'),
(2, 'David', 'Jones', 'david.jones@email.com'),
(3, 'Lisa', 'Garcia', 'lisa.garcia@email.com'),
(1, 'James', 'Miller', 'james.miller@email.com'),
(2, 'Anna', 'Davis', 'anna.davis@email.com');

INSERT INTO equipment (equip_id, equipment) VALUES
(1,'Dumbbells'),
(2,'Barbells'),
(3,'Resistance Bands'),
(4,'Resistance Bands'),
(5,'Gym Machines'),
(6,'Cardio Machines');


INSERT INTO user_equip (user_id, equip_id) VALUES
-- John Smith (1)
(1, 1),
(1, 3),
(1, 6),

-- Sarah Johnson (2)
(2, 2),
(2, 5),

-- Mike Williams (3)
(3, 1),
(3, 2),
(3, 5),

-- Emma Brown (4)
(4, 3),
(4, 4),
(4, 6),

-- David Jones (5)
(5, 2),
(5, 6),

-- Lisa Garcia (6)
(6, 1),
(6, 3),
(6, 5),

-- James Miller (7)
(7, 2),
(7, 4),

-- Anna Davis (8)
(8, 1),
(8, 5),
(8, 6);

INSERT INTO enemy (game_char_id, enemy_name, enemy_health, enemy_attack, enemy_level) VALUES
(1, 'Goblin', 50.0, 10.0, 1),
(1, 'Orc', 120.0, 25.0, 3),
(2, 'Troll', 200.0, 35.0, 5),
(2, 'Dragon', 500.0, 80.0, 10),
(3, 'Skeleton', 80.0, 15.0, 2),
(3, 'Zombie', 100.0, 20.0, 3),
(1, 'Vampire', 300.0, 50.0, 7),
(2, 'Demon', 400.0, 65.0, 9);

INSERT INTO body_metrics (user_id, body_weight, body_past_weight, body_height, body_age, body_gender, body_goal) VALUES
(1, 75.5, 78.0, 175.0, 25, 'male','Fat Loss'),
(2, 62.0, 65.0, 165.0, 28, 'female', 'Endurance Improvement'),
(3, 82.3, 80.0, 180.0, 32, 'male', 'Muscle Gain'),
(4, 58.5, 60.0, 160.0, 24, 'female', 'Injury Rehabilitation'),
(5, 90.0, 92.0, 185.0, 35, 'male', 'General Fitness'),
(6, 65.0, 67.0, 168.0, 30, 'female', 'Athletic Performance'),
(7, 78.0, 75.0, 178.0, 27, 'male', 'Fat Loss'),
(8, 55.0, 57.0, 162.0, 26, 'female', 'General Fitness');

INSERT INTO exersise (exer_name, exer_body_area, exer_type, exer_descrip, exer_vid, exer_equip) VALUES
('Push-ups', 'chest', 'strength', 'Classic upper body exercise', 'https://youtube.com/pushups', 'Bodyweight Only',),
('Squats', 'legs', 'strength', 'Lower body compound movement', 'https://youtube.com/squats', 'Bodyweight Only',),
('Running', 'full body', 'cardio', 'Outdoor cardio exercise', 'https://youtube.com/running', 'Dumbbells'),
('Bench Press', 'chest', 'strength', 'Chest and tricep builder', 'https://youtube.com/bench', 'Barbells'),
('Deadlift', 'back', 'strength', 'Full posterior chain exercise', 'https://youtube.com/deadlift','Gym Machines'),
('Cycling', 'legs', 'cardio', 'Low impact cardio', 'https://youtube.com/cycling', 'Cardio Machines', 'Gym Machines'),
('Pull-ups', 'back', 'strength', 'Back and bicep exercise', 'https://youtube.com/pullups', 'Bodyweight Only',),
('Jump Rope', 'full body', 'cardio', 'High intensity cardio', 'https://youtube.com/jumprope', 'Resistance Bands');

INSERT INTO work_plan (body_id, work_name, work_descrip, work_created_at, work_updated_at, work_day) VALUES
(1, 'Chest Day', 'Focus on chest and triceps', '2026-02-01 10:00:00', '2026-02-01 10:00:00', '2026-02-18'),
(2, 'Leg Day', 'Lower body workout', '2026-02-02 09:00:00', '2026-02-02 09:00:00', '2026-02-19'),
(3, 'Cardio Session', 'Endurance training', '2026-02-03 07:00:00', '2026-02-03 07:00:00', '2026-02-20'),
(4, 'Full Body', 'Complete body workout', '2026-02-04 08:00:00', '2026-02-04 08:00:00', '2026-02-21'),
(5, 'Back Day', 'Back and biceps', '2026-02-05 10:00:00', '2026-02-05 10:00:00', '2026-02-22'),
(6, 'HIIT Training', 'High intensity intervals', '2026-02-06 06:00:00', '2026-02-06 06:00:00', '2026-02-23'),
(7, 'Strength Training', 'Heavy compound lifts', '2026-02-07 11:00:00', '2026-02-07 11:00:00', '2026-02-24'),
(8, 'Recovery Cardio', 'Light cardio session', '2026-02-08 07:30:00', '2026-02-08 07:30:00', '2026-02-25');

INSERT INTO meal_plan (body_id, meal_day, meal_name) VALUES
(1, '2026-02-18 08:00:00', 'Breakfast Plan'),
(2, '2026-02-18 12:00:00', 'Lunch Plan'),
(3, '2026-02-18 18:00:00', 'Dinner Plan'),
(4, '2026-02-19 08:00:00', 'Morning Meal'),
(5, '2026-02-19 12:00:00', 'Afternoon Meal'),
(6, '2026-02-19 18:00:00', 'Evening Meal'),
(7, '2026-02-20 08:00:00', 'Protein Breakfast'),
(8, '2026-02-20 12:00:00', 'Healthy Lunch');

INSERT INTO plan_exersise (work_id, exer_id, plan_exer_amount, plan_exer_PB, plan_exer_PB_first) VALUES
(1, 1, 20, 25, 15),
(1, 4, 10, 12, 8),
(2, 2, 15, 20, 10),
(3, 3, 30, 35, 20),
(4, 5, 8, 10, 5),
(5, 7, 12, 15, 8),
(6, 8, 100, 120, 80),
(7, 4, 12, 15, 10);

INSERT INTO food (food_name, food_type, food_calories) VALUES
('Chicken', 'protein', 165.0),
('Rice', 'carbs', 130.0),
('Broccoli', 'vegetable', 55.0),
('Salmon', 'protein', 208.0),
('Pasta', 'carbs', 131.0),
('Spinach', 'vegetable', 23.0),
('Eggs', 'protein', 155.0),
('Oats', 'carbs', 389.0);

INSERT INTO food_plan (food_id, meal_id) VALUES
(1, 1),
(2, 1),
(3, 2),
(4, 2),
(5, 3),
(6, 3),
(7, 4),
(8, 4);

INSERT INTO custom_items (item_name, item_effect, item_level, item_type) VALUES
('Health Potion', 50, 1, 'consumable'),
('Mana Potion', 30, 1, 'consumable'),
('Iron Sword', 15, 3, 'weapon'),
('Steel Shield', 20, 4, 'armor'),
('Magic Ring', 10, 5, 'accessory'),
('Leather Boots', 8, 2, 'armor'),
('Fire Staff', 25, 6, 'weapon'),
('Elixir', 100, 7, 'consumable');

INSERT INTO game_items (item_id, game_char_id) VALUES
(1, 1),
(2, 1),
(3, 1),
(4, 2),
(5, 2),
(6, 2),
(7, 3),
(8, 3);

INSERT INTO rewards (enemy_id, reward_level, reward_name, reward_type, description) VALUES
(1, 1, 'Goblin Gold', 'currency', 'Small amount of gold from goblin'),
(2, 3, 'Orc Axe', 'item', 'A crude but effective axe'),
(3, 5, 'Troll Hide', 'item', 'Tough leather for crafting armor'),
(4, 10, 'Dragon Scale', 'item', 'Legendary crafting material'),
(5, 2, 'Bone Dust', 'item', 'Useful for alchemy'),
(6, 3, 'Zombie Brain', 'item', 'Disgusting but valuable'),
(7, 7, 'Vampire Fang', 'item', 'Rare alchemical ingredient'),
(8, 9, 'Demon Soul', 'experience', 'Grants massive experience');

INSERT INTO meal_collection (collection_name, collection_type, description) VALUES
('Vegan Meals', 'vegan', 'Plant-based meals with no animal products'),
('Vegetarian Meals', 'vegetarian', 'Meals without meat but may include dairy/eggs'),
('High Protein', 'high_protein', 'Protein-rich meals for muscle building'),
('Low Carb', 'low_carb', 'Low carbohydrate meals for weight management'),
('Keto Friendly', 'keto', 'High fat, low carb meals for ketogenic diet'),
('Low Calorie', 'low_calorie', 'Meals under 300 calories for weight loss'),
('Post Workout', 'post_workout', 'Recovery meals with protein and carbs'),
('Quick Snacks', 'snacks', 'Fast and easy snack options');

--Run this before inserting additional food data;
ALTER TABLE food ALTER COLUMN food_name TYPE VARCHAR(50);

INSERT INTO food (food_name, food_type, food_calories) VALUES
-- Proteins
('Beef', 'protein', 250.0),
('Tuna', 'protein', 132.0),
('Turkey', 'protein', 135.0),
('Tofu', 'protein', 76.0),
('Greek Yogurt', 'protein', 100.0),
('Cottage Cheese', 'protein', 98.0),
('Protein Shake', 'protein', 120.0),
('Pork Chop', 'protein', 231.0),

-- Carbs
('Quinoa', 'carbs', 222.0),
('Brown Rice', 'carbs', 218.0),
('Sweet Potato', 'carbs', 112.0),
('White Bread', 'carbs', 265.0),
('Whole Wheat Bread', 'carbs', 247.0),
('Bagel', 'carbs', 289.0),
('Couscous', 'carbs', 176.0),
('Cereal', 'carbs', 379.0),

-- Vegetables
('Carrots', 'vegetable', 41.0),
('Kale', 'vegetable', 33.0),
('Bell Peppers', 'vegetable', 31.0),
('Tomatoes', 'vegetable', 18.0),
('Cucumber', 'vegetable', 16.0),
('Cauliflower', 'vegetable', 25.0),
('Green Beans', 'vegetable', 31.0),
('Lettuce', 'vegetable', 15.0),

-- Fruits
('Apple', 'fruit', 95.0),
('Banana', 'fruit', 105.0),
('Orange', 'fruit', 62.0),
('Strawberries', 'fruit', 49.0),
('Blueberries', 'fruit', 84.0),
('Grapes', 'fruit', 104.0),
('Watermelon', 'fruit', 86.0),
('Mango', 'fruit', 135.0),

-- Fats/Oils
('Avocado', 'fat', 240.0),
('Olive Oil', 'fat', 119.0),
('Almonds', 'fat', 164.0),
('Peanut Butter', 'fat', 188.0),
('Walnuts', 'fat', 185.0),
('Cheese', 'fat', 113.0),
('Butter', 'fat', 102.0),
('Cashews', 'fat', 157.0),

-- Snacks
('Granola Bar', 'snack', 140.0),
('Protein Bar', 'snack', 200.0),
('Trail Mix', 'snack', 173.0),
('Popcorn', 'snack', 55.0),
('Rice Cakes', 'snack', 35.0),
('Crackers', 'snack', 120.0),
('Chips', 'snack', 152.0),
('Pretzels', 'snack', 108.0);

INSERT INTO collection_foods (collection_id, food_id) 
SELECT 1, food_id FROM food 
WHERE food_type IN ('vegetable', 'fruit', 'carbs') 
AND food_name IN ('Rice', 'Broccoli', 'Spinach', 'Oats', 'Quinoa', 'Brown Rice', 
                  'Sweet Potato', 'Carrots', 'Kale', 'Bell Peppers', 'Tomatoes', 
                  'Cucumber', 'Cauliflower', 'Green Beans', 'Lettuce', 
                  'Apple', 'Banana', 'Orange', 'Strawberries', 'Blueberries', 
                  'Grapes', 'Watermelon', 'Mango', 'Avocado', 'Almonds', 
                  'Walnuts', 'Cashews', 'Tofu');

INSERT INTO collection_foods (collection_id, food_id) 
SELECT 2, food_id FROM food 
WHERE food_type IN ('vegetable', 'fruit', 'carbs', 'fat') 
OR food_name IN ('Eggs', 'Greek Yogurt', 'Cottage Cheese', 'Cheese', 'Tofu');

INSERT INTO collection_foods (collection_id, food_id) 
SELECT 3, food_id FROM food 
WHERE food_type = 'protein';

INSERT INTO collection_foods (collection_id, food_id) 
SELECT 4, food_id FROM food 
WHERE food_type IN ('protein', 'vegetable', 'fat');

INSERT INTO collection_foods (collection_id, food_id) 
SELECT 5, food_id FROM food 
WHERE food_type IN ('protein', 'fat')
OR food_name IN ('Broccoli', 'Spinach', 'Cauliflower', 'Avocado', 'Kale');

INSERT INTO collection_foods (collection_id, food_id) 
SELECT 6, food_id FROM food 
WHERE food_calories < 100;

INSERT INTO collection_foods (collection_id, food_id) 
SELECT 7, food_id FROM food 
WHERE food_type IN ('protein', 'carbs');

INSERT INTO collection_foods (collection_id, food_id) 
SELECT 8, food_id FROM food
WHERE food_type = 'snack';